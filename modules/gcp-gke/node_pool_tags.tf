###
# This file contains no business logic.
# It's sole goal is to provide a way to read out the tags of the node pool, which include the ones we apply with this component + the ones Generated by Google.
###

locals {
  # includes the by GCP-managed tags
  all_primary_node_pool_tags = sort(data.google_compute_instance.primary_node_pool.tags)
}

data "google_compute_instance_group" "primary_node_pool" {
  depends_on = [google_container_node_pool.primary_node_pool]
  self_link  = element(google_container_node_pool.primary_node_pool.managed_instance_group_urls, 0)
}

data "google_compute_instance" "primary_node_pool" {
  self_link = tolist(data.google_compute_instance_group.primary_node_pool.instances)[0]
}
